

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building open62541 &mdash; open62541 0.3.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'0.3.1',
              LANGUAGE:'en',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="Introduction" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="toc.html" class="icon icon-home"> open62541
          

          
            
            <img src="_static/open62541_html.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building open62541</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-the-examples">Building the Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-library">Building the Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-with-cmake-on-ubuntu-or-debian">Building with CMake on Ubuntu or Debian</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-with-cmake-on-windows">Building with CMake on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-on-os-x">Building on OS X</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-on-openbsd">Building on OpenBSD</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#build-options">Build Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#build-type-and-logging">Build Type and Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-build-group">UA_BUILD_* group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-enable-group">UA_ENABLE_* group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-debug-group">UA_DEBUG_* group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-a-shared-library">Building a shared library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minimizing-the-binary-size">Minimizing the binary size</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-and-packaging">Installation and packaging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="protocol.html">Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodestore.html">Information Modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="constants.html">Standard-Defined Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodeset_compiler.html">XML Nodeset Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal.html">Internals</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="toc.html">open62541</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="toc.html">Docs</a> &raquo;</li>
        
      <li>Building open62541</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/building.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-open62541">
<span id="building"></span><h1>Building open62541<a class="headerlink" href="#building-open62541" title="Permalink to this headline">¶</a></h1>
<div class="section" id="building-the-examples">
<h2>Building the Examples<a class="headerlink" href="#building-the-examples" title="Permalink to this headline">¶</a></h2>
<p>Using the GCC compiler, the following calls build the examples on Linux.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp /path-to/open62541.* . <span class="c1"># copy single-file distribution to the local directory</span>
cp /path-to/examples/server_variable.c . <span class="c1"># copy the example server</span>
gcc -std<span class="o">=</span>c99 open62541.c server_variable.c -o server
</pre></div>
</div>
</div>
<div class="section" id="building-the-library">
<h2>Building the Library<a class="headerlink" href="#building-the-library" title="Permalink to this headline">¶</a></h2>
<div class="section" id="building-with-cmake-on-ubuntu-or-debian">
<h3>Building with CMake on Ubuntu or Debian<a class="headerlink" href="#building-with-cmake-on-ubuntu-or-debian" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install git build-essential gcc pkg-config cmake python python-six

<span class="c1"># enable additional features</span>
sudo apt-get install cmake-curses-gui <span class="c1"># for the ccmake graphical interface</span>
sudo apt-get install libmbedtls-dev <span class="c1"># for encryption support</span>
sudo apt-get install check <span class="c1"># for unit tests</span>
sudo apt-get install python-sphinx graphviz <span class="c1"># for documentation generation</span>
sudo apt-get install python-sphinx-rtd-theme <span class="c1"># documentation style</span>

<span class="nb">cd</span> open62541
mkdir build
<span class="nb">cd</span> build
cmake ..
make

<span class="c1"># select additional features</span>
ccmake ..
make

<span class="c1"># build documentation</span>
make doc <span class="c1"># html documentation</span>
make doc_pdf <span class="c1"># pdf documentation (requires LaTeX)</span>
</pre></div>
</div>
</div>
<div class="section" id="building-with-cmake-on-windows">
<h3>Building with CMake on Windows<a class="headerlink" href="#building-with-cmake-on-windows" title="Permalink to this headline">¶</a></h3>
<p>Here we explain the build process for Visual Studio (2013 or newer). To build
with MinGW, just replace the compiler selection in the call to CMake.</p>
<ul class="simple">
<li>Download and install<ul>
<li>Python 2.7.x (Python 3.x works as well): <a class="reference external" href="https://python.org/downloads">https://python.org/downloads</a></li>
<li>Install python-six with the pip package manager (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">six</span></code>)</li>
<li>CMake: <a class="reference external" href="http://www.cmake.org/cmake/resources/software.html">http://www.cmake.org/cmake/resources/software.html</a></li>
<li>Microsoft Visual Studio: <a class="reference external" href="https://www.visualstudio.com/products/visual-studio-community-vs">https://www.visualstudio.com/products/visual-studio-community-vs</a></li>
</ul>
</li>
<li>Download the open62541 sources (using git or as a zipfile from github)</li>
<li>Open a command shell (cmd) and run</li>
</ul>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">cd</span> <span class="p">&lt;</span>path-to<span class="p">&gt;</span>\open62541
<span class="k">mkdir</span> build
<span class="k">cd</span> build
<span class="p">&lt;</span>path-to<span class="p">&gt;</span>\cmake.exe .. -G <span class="s2">&quot;Visual Studio 14 2015&quot;</span>
<span class="p">:</span><span class="c1">: You can use use cmake-gui for a graphical user-interface to select features</span>
</pre></div>
</div>
<ul class="simple">
<li>Then open <code class="file docutils literal notranslate"><span class="pre">buildopen62541.sln</span></code> in Visual Studio 2015 and build as usual</li>
</ul>
</div>
<div class="section" id="building-on-os-x">
<h3>Building on OS X<a class="headerlink" href="#building-on-os-x" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Download and install<ul>
<li>Xcode: <a class="reference external" href="https://itunes.apple.com/us/app/xcode/id497799835?ls=1&amp;mt=12">https://itunes.apple.com/us/app/xcode/id497799835?ls=1&amp;mt=12</a></li>
<li>Homebrew: <a class="reference external" href="http://brew.sh/">http://brew.sh/</a></li>
<li>Pip (a package manager for python, may be preinstalled): <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">easy_install</span> <span class="pre">pip</span></code></li>
</ul>
</li>
<li>Run the following in a shell</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install cmake
pip install six <span class="c1"># python 2/3 compatibility workarounds</span>
pip install sphinx <span class="c1"># for documentation generation</span>
pip install sphinx_rtd_theme <span class="c1"># documentation style</span>
brew install graphviz <span class="c1"># for graphics in the documentation</span>
brew install check <span class="c1"># for unit tests</span>
brew install userspace-rcu <span class="c1"># for multi-threading support</span>
</pre></div>
</div>
<p>Follow Ubuntu instructions without the <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> commands as these are taken care of by the above packages.</p>
</div>
<div class="section" id="building-on-openbsd">
<h3>Building on OpenBSD<a class="headerlink" href="#building-on-openbsd" title="Permalink to this headline">¶</a></h3>
<p>The procedure below works on OpenBSD 5.8 with gcc version 4.8.4, cmake version 3.2.3 and Python version 2.7.10.</p>
<ul class="simple">
<li>Install a recent gcc, python and cmake:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pkg_add gcc python cmake
</pre></div>
</div>
<ul class="simple">
<li>Tell the system to actually use the recent gcc (it gets installed as egcc on OpenBSD):</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>egcc <span class="nv">CXX</span><span class="o">=</span>eg++
</pre></div>
</div>
<ul class="simple">
<li>Now procede as described for Ubuntu/Debian:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> open62541
mkdir build
<span class="nb">cd</span> build
cmake ..
make
</pre></div>
</div>
</div>
</div>
<div class="section" id="build-options">
<h2>Build Options<a class="headerlink" href="#build-options" title="Permalink to this headline">¶</a></h2>
<p>The open62541 project uses CMake to manage the build options, for code
generation and to generate build projects for the different systems and IDEs.
The tools <em>ccmake</em> or <em>cmake-gui</em> can be used to graphically set the build
options.</p>
<p>Most options can be changed manually in <code class="file docutils literal notranslate"><span class="pre">ua_config.h</span></code> (<code class="file docutils literal notranslate"><span class="pre">open62541.h</span></code>
for the single-file release) after the code generation. But usually there is no
need to adjust them.</p>
<div class="section" id="build-type-and-logging">
<h3>Build Type and Logging<a class="headerlink" href="#build-type-and-logging" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><strong>CMAKE_BUILD_TYPE</strong></dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code> -O2 optimization with debug symbols</li>
<li><code class="docutils literal notranslate"><span class="pre">Release</span></code> -O2 optimization without debug symbols</li>
<li><code class="docutils literal notranslate"><span class="pre">Debug</span></code> -O0 optimization with debug symbols</li>
<li><code class="docutils literal notranslate"><span class="pre">MinSizeRel</span></code> -Os optimization without debug symbols</li>
</ul>
</dd>
<dt><strong>UA_LOGLEVEL</strong></dt>
<dd><p class="first">The SDK logs events of the level defined in <code class="docutils literal notranslate"><span class="pre">UA_LOGLEVEL</span></code> and above only.
The logging event levels are as follows:</p>
<blockquote class="last">
<div><ul class="simple">
<li>600: Fatal</li>
<li>500: Error</li>
<li>400: Warning</li>
<li>300: Info</li>
<li>200: Debug</li>
<li>100: Trace</li>
</ul>
</div></blockquote>
</dd>
</dl>
</div>
<div class="section" id="ua-build-group">
<h3>UA_BUILD_* group<a class="headerlink" href="#ua-build-group" title="Permalink to this headline">¶</a></h3>
<p>By default only the shared object libopen62541.so or the library open62541.dll
and open62541.dll.a resp. open62541.lib are build. Additional artifacts can be
specified by the following options:</p>
<dl class="docutils">
<dt><strong>UA_BUILD_EXAMPLES</strong></dt>
<dd>Compile example servers and clients from <code class="file docutils literal notranslate"><span class="pre">examples/</span><em><span class="pre">xyz</span></em><span class="pre">.c</span></code>. A static and a dynamic binary is linked, respectively.</dd>
<dt><strong>UA_BUILD_UNIT_TESTS</strong></dt>
<dd>Compile unit tests with Check framework. The tests can be executed with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code></dd>
<dt><strong>UA_BUILD_EXAMPLES_NODESET_COMPILER</strong></dt>
<dd>Generate an OPC UA information model from a nodeset XML (experimental)</dd>
<dt><strong>UA_BUILD_SELFSIGNED_CERTIFICATE</strong></dt>
<dd>Generate a self-signed certificate for the server (openSSL required)</dd>
</dl>
</div>
<div class="section" id="ua-enable-group">
<h3>UA_ENABLE_* group<a class="headerlink" href="#ua-enable-group" title="Permalink to this headline">¶</a></h3>
<p>This group contains build options related to the supported OPC UA features.</p>
<dl class="docutils">
<dt><strong>UA_ENABLE_SUBSCRIPTIONS</strong></dt>
<dd>Enable subscriptions</dd>
<dt><strong>UA_ENABLE_METHODCALLS</strong></dt>
<dd>Enable the Method service set</dd>
<dt><strong>UA_ENABLE_NODEMANAGEMENT</strong></dt>
<dd>Enable dynamic addition and removal of nodes at runtime</dd>
<dt><strong>UA_ENABLE_AMALGAMATION</strong></dt>
<dd>Compile a single-file release into the files <code class="file docutils literal notranslate"><span class="pre">open62541.c</span></code> and <code class="file docutils literal notranslate"><span class="pre">open62541.h</span></code></dd>
<dt><strong>UA_ENABLE_MULTITHREADING</strong></dt>
<dd>Enable multi-threading support</dd>
<dt><strong>UA_ENABLE_COVERAGE</strong></dt>
<dd>Measure the coverage of unit tests</dd>
<dt><strong>UA_ENABLE_DISCOVERY</strong></dt>
<dd>Enable Discovery Service (LDS)</dd>
<dt><strong>UA_ENABLE_DISCOVERY_MULTICAST</strong></dt>
<dd>Enable Discovery Service with multicast support (LDS-ME)</dd>
<dt><strong>UA_ENABLE_DISCOVERY_SEMAPHORE</strong></dt>
<dd>Enable Discovery Semaphore support</dd>
</dl>
<p>Some options are marked as advanced. The advanced options need to be toggled to
be visible in the cmake GUIs.</p>
<dl class="docutils">
<dt><strong>UA_ENABLE_TYPENAMES</strong></dt>
<dd>Add the type and member names to the UA_DataType structure. Enabled by default.</dd>
<dt><strong>UA_ENABLE_STATUSCODE_DESCRIPTIONS</strong></dt>
<dd>Compile the human-readable name of the StatusCodes into the binary. Enabled by default.</dd>
<dt><strong>UA_ENABLE_FULL_NS0</strong></dt>
<dd>Use the full NS0 instead of a minimal Namespace 0 nodeset
<code class="docutils literal notranslate"><span class="pre">UA_FILE_NS0</span></code> is used to specify the file for NS0 generation from namespace0 folder. Default value is <code class="docutils literal notranslate"><span class="pre">Opc.Ua.NodeSet2.xml</span></code></dd>
<dt><strong>UA_ENABLE_NONSTANDARD_UDP</strong></dt>
<dd>Enable udp extension</dd>
</dl>
</div>
<div class="section" id="ua-debug-group">
<h3>UA_DEBUG_* group<a class="headerlink" href="#ua-debug-group" title="Permalink to this headline">¶</a></h3>
<p>This group contains build options mainly useful for development of the library itself.</p>
<dl class="docutils">
<dt><strong>UA_DEBUG</strong></dt>
<dd>Enable assertions and additional definitions not intended for production builds</dd>
<dt><strong>UA_DEBUG_DUMP_PKGS</strong></dt>
<dd>Dump every package received by the server as hexdump format</dd>
</dl>
</div>
<div class="section" id="building-a-shared-library">
<h3>Building a shared library<a class="headerlink" href="#building-a-shared-library" title="Permalink to this headline">¶</a></h3>
<p>open62541 is small enough that most users will want to statically link the
library into their programs. If a shared library (.dll, .so) is required, this
can be enabled in CMake with the <code class="docutils literal notranslate"><span class="pre">BUILD_SHARED_LIBS</span></code> option. Note that this
option modifies the <code class="file docutils literal notranslate"><span class="pre">ua_config.h</span></code> file that is also included in
<code class="file docutils literal notranslate"><span class="pre">open62541.h</span></code> for the single-file distribution.</p>
</div>
<div class="section" id="minimizing-the-binary-size">
<h3>Minimizing the binary size<a class="headerlink" href="#minimizing-the-binary-size" title="Permalink to this headline">¶</a></h3>
<p>The size of the generated binary can be reduced considerably by adjusting the
build configuration. First, in CMake, the build type can be set to
<code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE=MinSizeRel</span></code>. This sets the compiler flags to minimize the
binary size. The build type also strips out debug information. Second, the
binary size can be reduced by removing features via the build-flags described
above.</p>
<p>Especially, logging takes up a lot of space in the binary and might not be
needed in embedded scenarios. Setting <code class="docutils literal notranslate"><span class="pre">UA_LOGLEVEL</span></code> to a value above 600
(=FATAL) disables all logging. In addition, the feature-flags
<code class="docutils literal notranslate"><span class="pre">UA_ENABLE_TYPENAMES</span></code> and <code class="docutils literal notranslate"><span class="pre">UA_ENABLE_STATUSCODE_DESCRIPTIONS</span></code> add static
information to the binary that is only used for human-readable logging and
debugging.</p>
<p>The RAM requirements of a server are mostly due to the following settings:</p>
<ul class="simple">
<li>The size of the information model</li>
<li>The number of connected clients</li>
<li>The configured maximum message size that is preallocated</li>
</ul>
</div>
<div class="section" id="installation-and-packaging">
<h3>Installation and packaging<a class="headerlink" href="#installation-and-packaging" title="Permalink to this headline">¶</a></h3>
<p>You can install open62541 using the well known <cite>make install</cite> command.
This allows you to use pre-built libraries and headers for your own project.</p>
<p>To override the default installation directory use <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">-DCMAKE_INSTALL_PREFIX=/some/path</span></code>.
Based on the SDK Features you selected, as described above, these features will also
be included in the installation. Thus we recommend to enable as many features as possible
for the installed binary.</p>
<p>In your own CMake project you can then include the open62541 library using:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># optionally you can also specify a specific version</span>
<span class="c"># e.g. find_package(open62541 0.3.0)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">open62541</span> <span class="s">REQUIRED</span> <span class="s">COMPONENTS</span> <span class="s">FullNamespace</span> <span class="s">DiscoveryMulticast</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">main</span> <span class="s">main.cpp</span> <span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">main</span> <span class="s">open62541</span><span class="p">)</span>
</pre></div>
</div>
<p>A full list of enabled features during build time is stored in the CMake Variable <code class="docutils literal notranslate"><span class="pre">open62541_COMPONENTS_ALL</span></code></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, The open62541 authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>