<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>

<title>NodeStore</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">NodeStore</div>  </div>
<div class="ingroups"><a class="el" href="group__server.html">Server</a></div></div><!--header-->
<div class="contents">
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Stores the nodes in the address space. Internally, it is based on a hash-map that maps nodes to their nodeid. </p>
<p>Nodes need to be allocated on the heap before adding them to the nodestore with. When adding, the node is copied to a new (managed) location in the nodestore and the original memory is freed. The nodes in the nodestore are immutable. To change the content of a node, it needs to be replaced as a whole.</p>
<p>Every node you _get from the nodestore needs to be _released when it is no longer needed. In the background, reference counting is used to know if somebody still uses the node in multi-threaded environments. </p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__external__nodestore.html">External Nodestore</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>An external application that manages its own data and data model. </p>
<br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gaf4a4a284506499e2a78e9a8814a88161">UA_NodeStore_nodeVisitor</a> )(const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *node)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga24dbca297c72477ab2144076ec807307">UA_NodeStore_new</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga754d4517ad53cb4286592713d9981152">UA_NodeStore_delete</a> (<a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gae5ecf7898b113ff25997346ede4a0ca9">UA_NodeStore_insert</a> (<a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *node, const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> **inserted)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gac45871330d61a5cf82c53c93d9ce953e">UA_NodeStore_replace</a> (<a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *oldNode, <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *node, const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> **inserted)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga6f17e438ced10fd4c1f035a930acd23a">UA_NodeStore_remove</a> (<a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, const <a class="el" href="structUA__NodeId.html">UA_NodeId</a> *nodeid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga095dd91bcde9da3fe6738beae5dc60ed">UA_NodeStore_get</a> (const <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, const <a class="el" href="structUA__NodeId.html">UA_NodeId</a> *nodeid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gaafd9cf3d444706dffe43d38ae76fe2b8">UA_NodeStore_release</a> (const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *managed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga3bf247b62795b6a53bb551124a41e4f1">UA_NodeStore_iterate</a> (const <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, <a class="el" href="group__nodestore.html#gaf4a4a284506499e2a78e9a8814a88161">UA_NodeStore_nodeVisitor</a> visitor)</td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga6a58ef1e1f4671734067273d69a4dec6"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore" ref="ga6a58ef1e1f4671734067273d69a4dec6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gaf4a4a284506499e2a78e9a8814a88161"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_nodeVisitor" ref="gaf4a4a284506499e2a78e9a8814a88161" args=")(const UA_Node *node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__nodestore.html#gaf4a4a284506499e2a78e9a8814a88161">UA_NodeStore_nodeVisitor</a>)(const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *node)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A function that can be evaluated on all entries in a namespace via UA_NodeStore_iterate. Note that the visitor is read-only on the nodes. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga754d4517ad53cb4286592713d9981152"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_delete" ref="ga754d4517ad53cb4286592713d9981152" args="(UA_NodeStore *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__nodestore.html#ga754d4517ad53cb4286592713d9981152">UA_NodeStore_delete</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete the namespace and all nodes in it </p>

</div>
</div>
<a class="anchor" id="ga095dd91bcde9da3fe6738beae5dc60ed"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_get" ref="ga095dd91bcde9da3fe6738beae5dc60ed" args="(const UA_NodeStore *ns, const UA_NodeId *nodeid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a>* <a class="el" href="group__nodestore.html#ga095dd91bcde9da3fe6738beae5dc60ed">UA_NodeStore_get</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structUA__NodeId.html">UA_NodeId</a> *&#160;</td>
          <td class="paramname"><em>nodeid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieve a node (read-only) from the namespace. Nodes are immutable. They can only be replaced. After the Node is no longer used, the locked entry needs to be released. </p>

</div>
</div>
<a class="anchor" id="gae5ecf7898b113ff25997346ede4a0ca9"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_insert" ref="gae5ecf7898b113ff25997346ede4a0ca9" args="(UA_NodeStore *ns, UA_Node *node, const UA_Node **inserted)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a> <a class="el" href="group__nodestore.html#gae5ecf7898b113ff25997346ede4a0ca9">UA_NodeStore_insert</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> **&#160;</td>
          <td class="paramname"><em>inserted</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts a new node into the namespace. If the nodeid is zero, then a fresh numeric nodeid from namespace 1 is assigned. The memory of the original node is freed and the content is moved to a managed (immutable) node. If inserted is not NULL, then a pointer to the managed node is returned (and must be released). </p>

</div>
</div>
<a class="anchor" id="ga3bf247b62795b6a53bb551124a41e4f1"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_iterate" ref="ga3bf247b62795b6a53bb551124a41e4f1" args="(const UA_NodeStore *ns, UA_NodeStore_nodeVisitor visitor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__nodestore.html#ga3bf247b62795b6a53bb551124a41e4f1">UA_NodeStore_iterate</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#gaf4a4a284506499e2a78e9a8814a88161">UA_NodeStore_nodeVisitor</a>&#160;</td>
          <td class="paramname"><em>visitor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Iterate over all nodes in a namespace. </p>

</div>
</div>
<a class="anchor" id="ga24dbca297c72477ab2144076ec807307"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_new" ref="ga24dbca297c72477ab2144076ec807307" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a>* <a class="el" href="group__nodestore.html#ga24dbca297c72477ab2144076ec807307">UA_NodeStore_new</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a new namespace </p>

</div>
</div>
<a class="anchor" id="gaafd9cf3d444706dffe43d38ae76fe2b8"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_release" ref="gaafd9cf3d444706dffe43d38ae76fe2b8" args="(const UA_Node *managed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__nodestore.html#gaafd9cf3d444706dffe43d38ae76fe2b8">UA_NodeStore_release</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>managed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Release a managed node. Do never insert a node that isn't stored in a namespace. </p>

</div>
</div>
<a class="anchor" id="ga6f17e438ced10fd4c1f035a930acd23a"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_remove" ref="ga6f17e438ced10fd4c1f035a930acd23a" args="(UA_NodeStore *ns, const UA_NodeId *nodeid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a> <a class="el" href="group__nodestore.html#ga6f17e438ced10fd4c1f035a930acd23a">UA_NodeStore_remove</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structUA__NodeId.html">UA_NodeId</a> *&#160;</td>
          <td class="paramname"><em>nodeid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove a node from the namespace. Always succeeds, even if the node was not found. </p>

</div>
</div>
<a class="anchor" id="gac45871330d61a5cf82c53c93d9ce953e"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_replace" ref="gac45871330d61a5cf82c53c93d9ce953e" args="(UA_NodeStore *ns, const UA_Node *oldNode, UA_Node *node, const UA_Node **inserted)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a> <a class="el" href="group__nodestore.html#gac45871330d61a5cf82c53c93d9ce953e">UA_NodeStore_replace</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>oldNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> **&#160;</td>
          <td class="paramname"><em>inserted</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Replace an existing node in the nodestore. If the node was already replaced, UA_STATUSCODE_BADINTERNALERROR is returned. If inserted is not NULL, a pointer to the managed (immutable) node is returned. </p>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sat Oct 1 2016 10:27:31 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
